// Generated by CoffeeScript 1.8.0
(function() {
  jQuery(function() {
    console.log('Script ran');
    return $('#add-button').click((function(_this) {
      return function(e) {
        var field, fields, postData, _i, _len;
        e.preventDefault();
        fields = [$('#input-text')];
        for (_i = 0, _len = fields.length; _i < _len; _i++) {
          field = fields[_i];
          if (field.val().trim() === "") {
            alert('Missing input');
            return;
          }
        }
        postData = {
          'attempt': fields[0].val(),
          'puzzleNum': puzzleNum
        };
        if (confirm('Are you sure about your answer:\n' + postData['attempt'])) {
          return $.ajax({
            url: '/puzzle',
            type: 'POST',
            data: {
              'data': JSON.stringify(postData)
            },
            success: function(data) {
              var correctness, html, id, note, response, success;
              response = JSON.parse(data);
              success = response['success'];
              correctness = response['correctness'];
              note = response['attempt'];
              id = response['id'];
              if (correctness && !success) {
                html = $("<div class='alert alert-info' data-id='" + id + "'> <h4>You already got it right!</h4> <h5>" + note + "</h5> <h5>" + id + "</h5> </div>");
              } else if (!correctness && !success) {
                html = $("<div class='alert alert-danger' data-id='" + id + "'> <h4>You have run out of attempts!</h4> <h5>" + note + "</h5> <h5>" + id + "</h5> </div>");
              } else if (success && correctness) {
                html = $("<div class='alert alert-success' data-id='" + id + "'> <h4>Correct answer!</h4> <h5>" + note + "</h5> <h5>" + id + "</h5> </div>");
                $('#name_score').text(response['team_name'] + ' | ' + response['team_score']);
              } else if (success && !correctness) {
                html = $("<div class='alert alert-danger' data-id='" + id + "'> <h4>Wrong answer!</h4> <h5>" + note + "</h5> <h5>" + id + "</h5> </div>");
              }
              $('#attempts').prepend(html);
              html.hide().slideDown(500);
              return html.children('button[class="close"]').click(deleteSticky);
            }
          });
        }
      };
    })(this));
  });

}).call(this);

//# sourceMappingURL=stickies.js.map
